<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Heart Matching Game</title>
<link href="https://fonts.googleapis.com/css2?family=Bangers&display=swap" rel="stylesheet">
<link rel="stylesheet" href="css/game.css">
</head>

<body>

<h1>ðŸ’– Match the Hearts ðŸ’–</h1>
<div id="gameBoard"></div>

<audio id="heartSound">
  <source src="sounds/flip.mp3" type="audio/mpeg">
</audio>

<script>
const gameBoard = document.getElementById("gameBoard");
const heartSound = document.getElementById("heartSound");

/* LOAD 18 HEARTS */
const heartImages = [];
for(let i=1;i<=18;i++){
  const img = new Image();
  img.src = `images/heart${i}.png`;
  heartImages.push(img);
}

/* DUPLICATE â†’ 36 */
let cardsArray = [...heartImages, ...heartImages];
shuffle(cardsArray);

let firstCard = null;
let secondCard = null;
let lockBoard = false;

cardsArray.forEach(img=>{
  const card = document.createElement("div");
  card.className = "card";

  const inner = document.createElement("div");
  inner.className = "card-inner";

  const front = document.createElement("div");
  front.className = "card-front";
  front.textContent = "?";

  const back = document.createElement("div");
  back.className = "card-back";

  const image = document.createElement("img");
  image.src = img.src;

  back.appendChild(image);
  inner.appendChild(front);
  inner.appendChild(back);
  card.appendChild(inner);
  gameBoard.appendChild(card);

  card.addEventListener("click", ()=>{
    if(lockBoard || card===firstCard) return;

    heartSound.currentTime = 0;
    heartSound.play();
    card.classList.add("flipped");

    if(!firstCard){
      firstCard = card;
      return;
    }

    secondCard = card;
    lockBoard = true;

    const img1 = firstCard.querySelector("img").src;
    const img2 = secondCard.querySelector("img").src;

    if(img1 === img2){
      firstCard.classList.add("matched");
      secondCard.classList.add("matched");
      reset();
    } else {
      setTimeout(()=>{
        firstCard.classList.remove("flipped");
        secondCard.classList.remove("flipped");
        reset();
      }, 800);
    }
  });
});

function reset(){
  [firstCard, secondCard, lockBoard] = [null, null, false];
}

function shuffle(arr){
  for(let i=arr.length-1;i>0;i--){
    const j = Math.floor(Math.random()*(i+1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
}
</script>

</body>
</html>
