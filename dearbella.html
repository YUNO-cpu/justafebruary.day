<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Drag & Heart Game</title>
  <link href="https://fonts.googleapis.com/css2?family=Bangers&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/second.css">
</head>
<body>

  <h1>Match the Pictures!</h1>

  <!-- Canvas for heart animation -->
  <canvas id="heartCanvas"></canvas>

  <!-- Game board -->
  <div id="gameBoard"></div>

  <script>
  /* ===== Canvas setup ===== */
  const canvas = document.getElementById("heartCanvas");
  const ctx = canvas.getContext("2d");
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;

  let hearts = [];
  const heartImages = [];
  for(let i=1;i<=36;i++){
    const img = new Image();
    img.src = `images/heart${i}.png`; // images/heart1.png ... heart36.png
    heartImages.push(img);
  }

  function createHearts() {
    hearts = [];
    for(let i=0;i<36;i++){
      hearts.push({
        x: Math.random()*canvas.width,
        y: Math.random()*-canvas.height,
        size: Math.random()*40+30,
        speed: Math.random()*2+1,
        sway: Math.random()*2+1,
        angle: Math.random()*Math.PI*2,
        img: heartImages[i],
        opacity: Math.random()
      });
    }
  }

  function drawHeart(x,y,size,opacity,img){
    if(!img) return;
    ctx.save();
    ctx.globalAlpha = opacity;
    ctx.drawImage(img,x-size/2,y-size/2,size,size);
    ctx.restore();
  }

  function animateHearts(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    hearts.forEach(h=>{
      h.angle += 0.05;
      h.x += Math.sin(h.angle)*h.sway;
      h.y += h.speed;
      drawHeart(h.x,h.y,h.size,h.opacity,h.img);
      if(h.y>canvas.height+50) h.y=-50;
    });
    requestAnimationFrame(animateHearts);
  }

  createHearts();
  animateHearts();

  /* ===== Game Board (36 cards / 18 pairs) ===== */
  const gameBoard = document.getElementById("gameBoard");
  const totalPairs = 18; // 18 хос = 36 карт
  const selectedImages = heartImages.slice(0,totalPairs); 
  const cardsArray = [...selectedImages,...selectedImages]; // duplicate for pairs
  shuffle(cardsArray);

  let firstCard = null;
  let secondCard = null;
  let lockBoard = false;

  function shuffle(array){
    for(let i=array.length-1;i>0;i--){
      const j=Math.floor(Math.random()*(i+1));
      [array[i],array[j]]=[array[j],array[i]];
    }
  }

  cardsArray.forEach(img=>{
    const card=document.createElement("div");
    card.classList.add("card");
    const image=document.createElement("img");
    image.src=img.src;
    image.style.visibility="hid

