<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Thank you</title>

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Bangers&display=swap" rel="stylesheet">

  <!-- CSS -->
  <link rel="stylesheet" href="css/second.css">
</head>

<body>

  <!-- Thank you text -->
  <div id="thankyou">Thank you</div>

  <!-- Sticker image -->
  <img src="images/thanks.png" class="responsive">

  <!-- Small text -->
  <h1>Don't go yet!</h1>

  <!-- Hearts canvas -->
  <canvas id="confettiCanvas"></canvas>

  <audio id="heartSound">
  <source src="heart.mp3" type="audio/mpeg">
</audio>

  <!-- Button -->
<a class="button" onclick="startLove()">
  Click here to make me your aashtai zaluu.
</a>

  <!-- Heart animation -->

 <script>
/* ===== canvas setup ===== */
const canvas = document.getElementById("confettiCanvas");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let hearts = [];
let audioCtx;

/* ===== 1. sound (file —Ö—ç—Ä—ç–≥–≥“Ø–π) ===== */
function playHeartbeat() {
  if (!audioCtx) {
    audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  }

  const osc = audioCtx.createOscillator();
  const gain = audioCtx.createGain();

  osc.type = "sine";
  osc.frequency.setValueAtTime(520, audioCtx.currentTime);
  gain.gain.setValueAtTime(0.12, audioCtx.currentTime);

  osc.connect(gain);
  gain.connect(audioCtx.destination);

  osc.start();
  osc.stop(audioCtx.currentTime + 0.25);
}

/* ===== 2. startLove (CLICK –î–ê–†–ê–•–ê–î) ===== */
function startLove() {
  playHeartbeat();        // üîä sound
  startVibration();       // üì≥ mobile vibration
  createHearts();         // ‚ù§Ô∏è –∑“Ø—Ä—Ö
  animateHearts();

  // ‚è± 2 —Å–µ–∫—É–Ω–¥–∏–π–Ω –¥–∞—Ä–∞–∞ –¥–∞—Ä–∞–∞–≥–∏–π–Ω —Ö—É—É–¥–∞—Å
  setTimeout(() => {
    window.location.href = "dearbella.html";
  }, 2000);
}

/* ===== vibration ===== */
function startVibration() {
  if (navigator.vibrate) {
    navigator.vibrate([100, 50, 100]);
  }
}

/* ===== hearts ===== */
function createHearts() {
  hearts = [];
  for (let i = 0; i < 60; i++) {
    hearts.push({
      x: Math.random() * canvas.width,
      y: Math.random() * -canvas.height,
      size: Math.random() * 14 + 10,
      speed: Math.random() * 2 + 1,
      sway: Math.random() * 2 + 1,
      angle: Math.random() * Math.PI * 2,
      opacity: Math.random()
    });
  }
}

function drawHeart(x, y, size, opacity) {
  ctx.save();
  ctx.translate(x, y);
  ctx.scale(size / 30, size / 30);
  ctx.beginPath();
  ctx.moveTo(0, 0);
  ctx.bezierCurveTo(-15, -15, -30, 10, 0, 30);
  ctx.bezierCurveTo(30, 10, 15, -15, 0, 0);
  ctx.closePath();
  ctx.fillStyle = `rgba(255,80,120,${opacity})`;
  ctx.fill();
  ctx.restore();
}

function animateHearts() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  hearts.forEach(h => {
    h.angle += 0.05;
    h.x += Math.sin(h.angle) * h.sway; // ‚ÜîÔ∏è –±–∞—Ä—É—É–Ω –∑“Ø“Ø–Ω —Å–∞–≤–ª–∞—Ö
    h.y += h.speed;
    drawHeart(h.x, h.y, h.size, h.opacity);
  });
  requestAnimationFrame(animateHearts);
}
</script>

</body>
</html>
